<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_075yscy" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.6.0">
  <bpmn:process id="Process_1bb4f0u" name="Http Demo" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1l8guke">
      <bpmn:outgoing>SequenceFlow_099n9w7</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="SequenceFlow_099n9w7" sourceRef="StartEvent_1l8guke" targetRef="Task_1bzqvlk" />
    <bpmn:serviceTask id="Task_1bzqvlk" name="Get Product">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="url">http://localhost:9999/products/${pid}</camunda:inputParameter>
            <camunda:inputParameter name="method">GET</camunda:inputParameter>
            <camunda:outputParameter name="productData">
              <camunda:script scriptFormat="Javascript">var resp=connector.getVariable("response");
resp
</camunda:script>
            </camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_099n9w7</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_130j81o</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_130j81o" sourceRef="Task_1bzqvlk" targetRef="Task_1wl9mdu" />
    <bpmn:scriptTask id="Task_1wl9mdu" name="Update Cost by 1.5" scriptFormat="Javascript">
      <bpmn:incoming>SequenceFlow_130j81o</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0r6vct6</bpmn:outgoing>
      <bpmn:script>var productData=S(execution.getVariable("productData"));
print(productData);
productData.prop("cost",productData.prop("cost")*1.5);</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:serviceTask id="ServiceTask_0oe2xpo" name="Post new product detail">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="url">http://localhost:9999/products</camunda:inputParameter>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:inputParameter name="payload">
              <camunda:script scriptFormat="Javascript">execution.getVariable("productData");</camunda:script>
            </camunda:inputParameter>
            <camunda:outputParameter name="productUpdateRes">
              <camunda:script scriptFormat="Javascript">var resp=connector.getVariable("response");
resp
</camunda:script>
            </camunda:outputParameter>
            <camunda:outputParameter name="productUpdateRespCode">${statusCode}
</camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0r6vct6</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1dozs3w</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_0r6vct6" sourceRef="Task_1wl9mdu" targetRef="ServiceTask_0oe2xpo" />
    <bpmn:endEvent id="EndEvent_1jce2pm">
      <bpmn:incoming>SequenceFlow_1dozs3w</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1dozs3w" sourceRef="ServiceTask_0oe2xpo" targetRef="EndEvent_1jce2pm" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1bb4f0u">
      <bpmndi:BPMNShape id="StartEvent_1l8guke_di" bpmnElement="StartEvent_1l8guke">
        <dc:Bounds x="152" y="102" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_099n9w7_di" bpmnElement="SequenceFlow_099n9w7">
        <di:waypoint x="188" y="120" />
        <di:waypoint x="240" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_1n03wbp_di" bpmnElement="Task_1bzqvlk">
        <dc:Bounds x="240" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_130j81o_di" bpmnElement="SequenceFlow_130j81o">
        <di:waypoint x="340" y="120" />
        <di:waypoint x="400" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ScriptTask_0mwhkhw_di" bpmnElement="Task_1wl9mdu">
        <dc:Bounds x="400" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_0oe2xpo_di" bpmnElement="ServiceTask_0oe2xpo">
        <dc:Bounds x="620" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0r6vct6_di" bpmnElement="SequenceFlow_0r6vct6">
        <di:waypoint x="500" y="120" />
        <di:waypoint x="620" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_1jce2pm_di" bpmnElement="EndEvent_1jce2pm">
        <dc:Bounds x="842" y="102" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1dozs3w_di" bpmnElement="SequenceFlow_1dozs3w">
        <di:waypoint x="720" y="120" />
        <di:waypoint x="842" y="120" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
